// 1)  Byly vytvořeny prázdné elementy produktů (ještě nejsou naplněny hodnotami, pro start Swiperu to ale stačí).
function produktyVytvoreny(event) {
	if (event && event.type === "productsCreated") {
		/** SWIPER a JEHO NASTAVENÍ **/
		var mySwiper = new Swiper(event.target, {
            observer: true,
			speed: 400,
			slidesPerGroup: 6,
			spaceBetween: 20,
			navigation: {
              	// tento zápis umožní více karouselům v rámci jedné LP aby reagovaly pouze na svá tlačítka
				  nextEl: $(event.target).parent().find('.swiper-button-next'),
				  prevEl: $(event.target).parent().find('.swiper-button-prev'),
			},
			pagination: {
              	// tento zápis umožní více karouselům v rámci jedné LP aby reagovaly pouze na své pagination
				  el: $(event.target).parent().find('.swiper-pagination'),
				  type: 'bullets',
				  clickable: true,
			},
			breakpoints: {
				300: {
				  slidesPerView: 2,
                  spaceBetween: 10,
                  slidesPerGroup: 2
				},
				550: {
				  slidesPerView: 3,
                  spaceBetween: 10,
                  slidesPerGroup: 3
				},
				700: {
				  slidesPerView: 4,
                  spaceBetween: 20,
                  slidesPerGroup: 4
				},
				980: {
					slidesPerView: ($("#body2.layout-1").length) ? 6 : 5,
                  	spaceBetween: 20,
                  	slidesPerGroup: ($("#body2.layout-1").length) ? 6 : 5
				}
			},
			on: {
				init: function init() {
					
				}
			}
		});
	}
}

// 2)  Byla načtena data a vložena do elementů produktů - pokud má swiper loop, musí se duplikované produkty znovu vytvořit
function produktyNacteny(event) {
	if (event && event.type === "productsLoaded") {

		if (typeof event.target.swiper !== "undefined" && event.target.swiper.params.loop) {
			event.target.swiper.loopDestroy();
			event.target.swiper.loopCreate();
			event.target.swiper.update();
		}

	}
}

/*************************************************************************************************
 * Product Info 3.04
 * For fetching information about products using the most easiest way possible.
 *
 * Copyright 2021 Martin Luňák (martin.lunak@alza.cz)
 *
 * Property of Alza.cz
 *
 * Released on: Nov 17, 2021
*************************************************************************************************/
"use strict";function startProductsInfo(t){void 0===t&&(t=0);var e=!1;try{e=Alza.Web.Page.Data}catch(t){}try{e=e||Alza.Mobile.Page.data()}catch(t){}if(window.jQuery&&e&&Object.keys(e).length){if(!(100<t)&&$(".lp-products").length){var o=[];return $(".lp-products").each(function(t){var e=new Productor(this);e&&o.push(e)}),CommodityPack.lpCommodityPacks.forEach(function(t){return t.loadCommodityPack()}),o}}else setTimeout(function(){startProductsInfo(++t)},100)}var Productor=function(){function i(t){var e=this;this.$obj=$(t),this.alzaProductWeights=[1,2,7,8,10,11,41],this.Alza="function"==typeof isMobile&&isMobile()?Alza.Mobile.Page.data():Alza.Web.Page.Data,this.countryCode=this.getLanguage(),this.currencyCountryCode=this.getCurrencyCountryCode(),this.settings=this.getSettings(),this.commodityPacks=[],this.commodityPacksPromises=[],this.products=this.getProductCodes(),this.commodityPacksPromises.length?$.when.apply(null,this.commodityPacksPromises).always(function(){e.commodityPacksLoaded()}):this.getProducts()}var t=i.prototype;return t.getSettings=function(){return void 0===this.$obj.data("settings")?{shuffle:!1,showDisabled:!1,log:!1}:{shuffle:-1<this.$obj.data("settings").indexOf("shuffle"),showDisabled:-1<this.$obj.data("settings").indexOf("show-disabled"),log:-1<this.$obj.data("settings").indexOf("console")}},t.getProductCodes=function(){var o=this;if(void 0===this.$obj.data("products"))throw"U "+(1+$(".lp-products").index(this.$obj))+'. elementu ".lp-products" není přítomen atribut "data-products" obsahující výčet produktů!';if(!this.$obj.data("products"))throw"U "+(1+$(".lp-products").index(this.$obj))+'. elementu ".lp-products" nejsou v atributu "data-products" přítomny žádné produkty!';var r=(this.$obj.data("products")+"").replace(/[,.;:|]/g," ").replace(/\s\s+/g," ").split(" ");return r.forEach(function(t,e){if(e!==r.indexOf(t)&&(o.settings.log&&console.error("Pozor! U "+(1+$(".lp-products").index(o.$obj))+'. elementu ".lp-products" se ve výčtu nacházel duplicitní produktový kód: '+t+"."),r.splice(e,1)),t.replace(/\D/g,"").length!==t.length){if(0!==t.indexOf("sp"))throw"U "+(1+$(".lp-products").index(o.$obj))+'. elementu ".lp-products" je v atributu "data-products" přítomen chybný nečíselný kód produktu: "'+t+'".';o.prepareCommodityPack(t),r.splice(e,1)}}),!this.commodityPacksPromises.length&&this.settings.shuffle&&(r=this.shuffleArray(r)),r},t.getProducts=function(){var e=this,o=[],r=[],n=this.getAndCheckTemplate();this.products.forEach(function(t){o.push(new Product(t,n,e)),i.lpProducts[t]?(i.lpProducts[t][0].push(o[o.length-1]),r.push(i.lpProducts[t][1])):(Product.totalProducts++,99<Product.totalProducts?100===Product.totalProducts&&e.settings.log&&console.error('POZOR! Celkový počet načítaných produktů napříč elementy ".lp-products" přesáhl 100. K limitu došlo u '+(1+$(".lp-products").index(e.$obj))+'. elementu ".lp-products". SILNĚ DOPORUČUJI snížit počet produktů max na 50. Systém všechny další produkty nad 100 vynechá.'):(r.push(o[o.length-1].loadData()),i.lpProducts[t]=[[o[o.length-1]],r[r.length-1]]))}),$.when.apply(null,r).done(function(){e.settings.log&&console.info("Načtení produktů "+(1+$(".lp-products").index(e.$obj))+'. elementu ".lp-products" dokončeno.'),n.remove(),e.$obj.addClass("lp-products--loaded"),e.$obj.trigger("productsLoaded"),e.settings.log||e.removeAttributes()}).fail(function(){e.settings.log&&console.info("Načtení produktů "+(1+$(".lp-products").index(e.$obj))+'. elementu ".lp-products" dokončeno. Nepodařilo se však načíst ani jeden produkt.'),e.settings.log||e.$obj.remove()}),this.$obj.trigger("productsCreated")},t.prepareCommodityPack=function(t){var e=CommodityPack.checkCommodityPackCode(t,this);if(e&&Array.isArray(e)&&2===e.length){var o=e[0],r=e[1];if(this.commodityPacks.some(function(t){return Object.keys(t).pop()===o}))return console.error("Pozor! U "+(1+$(".lp-products").index(this.$obj))+'. elementu ".lp-products" se ve výčtu nacházela duplicitní skupina produktů '+t+". Systém bude druhý zápis ignorovat."),!1;this.commodityPacks.push(((e={})[o]=r,e));t=CommodityPack.isAlreadyUsed(o);!1===t?(e=new CommodityPack(o,r,this),this.commodityPacksPromises.push(e.promise),CommodityPack.lpCommodityPacks.push(e)):(t.minLength<r&&(t.minLength=r),this.commodityPacksPromises.push(t.promise),t.Productors.push(this))}},t.commodityPacksLoaded=function(){this.settings.shuffle&&(this.products=this.shuffleArray(this.products)),this.getProducts()},t.getAndCheckTemplate=function(){var t=this,e=this.$obj.find("[data-prod]").first();if(!e.length)throw"U "+(1+$(".lp-products").index(this.$obj))+'. elementu ".lp-products" není přítomen atribut "data-prod"!';return e.find("[data-prod-img]:not(img)").each(function(){throw"U "+(1+$(".lp-products").index(t.$obj))+'. elementu ".lp-products" je atribut "data-prod-img" přítomen u jiného tagu, než IMG!'}),e},t.shuffleArray=function(t){for(var e=t.length-1;0<e;e--){var o=Math.floor(Math.random()*(e+1)),r=[t[o],t[e]];t[e]=r[0],t[o]=r[1]}return t},t.getLanguage=function(){try{if(Alza.Shared.PageData.culture)return Alza.Shared.PageData.culture}catch(t){}try{if(3<document.documentElement.getAttribute("lang").length)return document.documentElement.getAttribute("lang")}catch(t){}try{if(Alza.hasOwnProperty("Mobile")){if(Alza.Mobile.Page.data().countryLocale)return Alza.Mobile.Page.data().countryLocale;if(Alza.Web.Page.Data.countryLocale)return Alza.Web.Page.Data.countryLocale;throw null}}catch(t){return window.navigator.language}},t.getCurrencyCountryCode=function(){var t;return((t={CZK:"cs-CZ",DKK:"da-DK",EUR:"de-DE"}).EUR="de-AT",t.GBP="en-GB",t.EUR="en-IE",t.USD="en-US",t.EUR="fi-FI",t.EUR="fr-BE",t.EUR="fr-FR",t.HUF="hu-HU",t.EUR="it-IT",t.JPY="jp-JP",t.KRW="ko-KR",t.EUR="nl-BE",t.EUR="nl-NL",t.PLN="pl-PL",t.EUR="pt-PT",t.RON="ro-RO",t.RUB="ru-RU",t.EUR="sk-SK",t.SEK="sv-SE",t.TRY="tr-TR",t.HKD="zh-HK",t.TWD="zh-TW",t)[this.Alza.currencyCode]},t.removeAttributes=function(){var e=this;["data-products","data-settings","data-prod","data-prod-name","data-prod-nameext","data-prod-img","data-prod-price","data-prod-vprice","data-prod-cprice","data-prod-discount","data-prod-url","data-prod-avail","data-prod-category","data-prod-sau"].forEach(function(t){e.$obj.find("["+t+"]").addBack("["+t+"]").each(function(){$(this).removeAttr(t)})})},i}();Productor.lpProducts={};var CommodityPack=function(){function t(t,e,o){var r=this;this.id=t,this.minLength=e,this.realLength,this.products=[],this.Productors=[o],this.promise=new $.Deferred,this.xhr,this.promise.done(function(){return r.commodityPackLoaded()}),this.promise.fail(function(){return r.commodityPackFailed()})}t.checkCommodityPackCode=function(t,r){var e,o,n=t,i=100;if(-1<n.indexOf("-")&&(/^sp\d{4,5}(-(cz|sk|en|de|at|hu)\d{4,5})+(-\d{1,2})?$/g.test(n)&&(n=function(t){var e=t.substr(t.indexOf("-"));/-\d{1,2}$/g.test(e)&&(e=e.substring(0,e.lastIndexOf("-"))),e=e.split("-");var o=!1;return e.some(function(t){return-1<location.href.toLowerCase().indexOf("/"+t.substr(0,2).toLowerCase()+"/")&&(o=t),o}),e=o?(r.settings.log&&console.info("U "+(1+$(".lp-products").index(r.$obj))+'. elementu ".lp-products" bude použita alternativní skupina produktů označená '+o+"."),"sp"+o.substr(2)):t.substring(0,t.indexOf("-")),/-\d{1,2}$/g.test(t)&&(e+="-"+t.substr(t.lastIndexOf("-")+1)),e}(n)),e=(n=n.substr(2).trim()).substr(n.indexOf("-")+1),o=parseInt(e.replace(/\D/g,"")),e.length!==(o+"").length?(isNaN(o)||(i=Math.min(100,parseInt(o))),r.settings.log&&console.error("Pozor! Skupina produktů označená "+t+" u "+(1+$(".lp-products").index(r.$obj))+'. elementu ".lp-products" obsahuje neplatnou hodnotu počtu (hodnota za pomlčkou) a to sice: "'+o+'". Hodnota by měla být číselná a maximálně 100. Nastavuji proto na '+i)):!o||100<o?r.settings.log&&console.error("Pozor! Skupina produktů označená  "+t+" u "+(1+$(".lp-products").index(r.$obj))+'. elementu ".lp-products" obsahuje neplatnou hodnotu počtu (hodnota za pomlčkou) a to sice: "'+o+'". Hodnota by měla být minimálně 1 a maximálně 100. Nastavuji proto na '+i):i=o,n=n.substring(0,n.indexOf("-"))),isNaN(parseInt(n)))throw"Pozor! Skupina produktů u "+(1+$(".lp-products").index(r.$obj))+'. elementu ".lp-products" obsahuje neplatné označení: '+t+". Hodnota by měla být číselná s možnou definicí počtu vypsaných produktů (maximálně 100), která následuje hned ID skupiny produktu oddělená pomlčkou.";return[n,i]},t.isAlreadyUsed=function(o){var r=!1;return t.lpCommodityPacks.some(function(t,e){return t.id===o&&(r=e,!0)}),!1!==r&&t.lpCommodityPacks[r]};var e=t.prototype;return e.loadCommodityPack=function(){var o=this;this.xhr=$.ajax("/services/restservice.svc/v3/pack/?id="+this.id+"&pageSize="+this.minLength,{dataType:"JSON",success:function(t){if(t.err)o.checkLogOption()&&console.error("Pozor! Systému se nepodařilo načíst skupinu produktů s ID "+o.id+" u "+(1+$(".lp-products").index(o.Productors[0].$obj))+'. elementu ".lp-products". '+t.msg),o.promise.reject();else{if(Array.isArray(t.data)&&t.data.length){var e=t.data.filter(function(t){return void 0!==t.oid}).map(function(t){return t.oid+""});if(e.length)return o.products=e,void o.promise.resolve()}o.checkLogOption()&&(console.error("Pozor! Systému se nepodařilo načíst platné informace o skupině produktů s ID "+o.id+" u "+(1+$(".lp-products").index(o.Productors[0].$obj))+'. elementu ".lp-products". Chybí "data.oid". Vráceno:'),console.log(t.data)),o.promise.reject()}},error:function(t){o.checkLogOption()&&(console.error("Pozor! Nepodařilo se spojit se systémem pro načítání informací o skupinách produktů při získávání informací o skupině s ID "+o.id+" u "+(1+$(".lp-products").index(o.Productors[0].$obj))+'. elementu ".lp-products". Debug info níže:'),console.log(t)),o.promise.reject()}})},e.commodityPackLoaded=function(){var r=this;this.checkLogOption()&&console.info("Seznam produktů ze skupiny produktů s ID "+this.id+(100!==this.minLength?" o max. délce "+this.minLength+" ":" ")+"byl úspěšně načten. Reálně bylo načteno "+this.products.length+" produktů."),this.Productors.forEach(function(t){var e=r.products,o=t.commodityPacks[r.id];o<e.length&&(e=e.slice(0,o)),e.forEach(function(e){t.products.some(function(t){return t===e})?r.checkLogOption()&&console.error("Pozor! U "+(1+$(".lp-products").index(t.$obj))+'. elementu ".lp-products" se produkt '+e+' již nachází ve skupině produktů uvedené v tomtéž ".lp-products" elementu.'):t.products.push(e)})})},e.commodityPackFailed=function(){},e.checkLogOption=function(){return this.Productors.some(function(t){return t.settings.log})},t}();CommodityPack.lpCommodityPacks=[];var Product=function(){function t(t,e,o){this.id=t,this.parent=o,this.$div=this.createProductDiv(e)}var e=t.prototype;return e.createProductDiv=function(t){var e=t.clone();return t.siblings("[data-prod]").addBack().last().after(e),e},e.loadData=function(){var e=this;return $.ajax("/services/restservice.svc/v13/product/"+this.id,{dataType:"JSON",headers:{"Accept-Language":(-1<this.parent.countryCode.indexOf("en")?"":this.parent.countryCode+",")+"en-GB;q=0.8,en-US;q=0.5,en;q=0.3"},success:function(t){t.err?(e.logSameProducts(!1,"Pozor! Systém nenalezl produkt s id "+e.id+". Vrácený výsledek:",t),e.removeSameProducts()):(e.parent.alzaProductWeights.includes(t.data.availabilityStatus)?e.logSameProducts(!0,"Informace o produktu "+e.id+" v pořádku načteny."):(e.logSameProducts(!1,"Pozor! Produkt s id "+e.id+" má webový příznak "+t.data.availabilityStatus+", což není platný webový příznak z výčtu: "+e.parent.alzaProductWeights.toString()+"."+(t.data.avail?" Důvod: "+t.data.avail+".":"")),e.removeSameProducts()),e.processSameProducts(t.data))},error:function(t){e.logSameProducts(!1,"Pozor! Nepodařilo se spojit se systémem pro načítání informací o produktech při získávání informací o produktu "+e.id+". Vrácený výsledek:\n"+t),e.removeSameProducts()}})},e.processSameProducts=function(e){e.cashBackPrice&&this.handleCashBack(e),Productor.lpProducts[this.id][0].forEach(function(t){return t.processData(e)})},e.removeSameProducts=function(){Productor.lpProducts[this.id][0].forEach(function(t){t.$div.remove()})},e.logSameProducts=function(e,o){Productor.lpProducts[this.id][0].some(function(t){return t.parent.settings.log&&(e?console.info(o):console.error(o)),t.parent.settings.log})},e.processData=function(e){var o=this,r={prod:function(t){},prodName:function(t){o.checkData("prod-name",e.name)&&o.insertString(t,"prod-name",e.name)},prodNameext:function(t){o.checkData("prod-nameext",e.spec)&&o.insertString(t,"prod-nameext",e.spec)},prodImg:function(t){o.checkData("prod-img",[e.img,e.imgs[0]])&&(e.imgs[0].thumb=e.img,o.insertImage(t,"prod-img",e.imgs[0],e.name))},prodPrice:function(t){o.checkData("prod-price",[e.price,e.priceNoCurrency])&&o.insertPrice(t,"prod-price",e.price,e.priceNoCurrency)},prodVprice:function(t){o.checkData("prod-vprice",e.priceWithoutVat)&&o.insertPrice(t,"prod-vprice",e.priceWithoutVat,o.getPriceNumber(e.priceWithoutVat,!1))},prodCprice:function(t){o.checkData("prod-cprice",[e.cprice,e.cpriceNoCurrency])&&o.insertPrice(t,"prod-cprice",e.cprice,e.cpriceNoCurrency)},prodSau:function(t){o.checkData("prod-sau",e.socialShoppingInfo)&&o.checkData("prod-sau",e.socialShoppingInfo.minimumPriceText)&&o.insertString(t,"prod-sau",e.socialShoppingInfo.minimumPriceText)},prodDiscount:function(t){o.checkData("prod-discount",e.icons)&&e.icons.some(function(t){return-1<t.image.indexOf("dynamic-discount.svg")})?o.insertDiscount(t,"prod-discount",e.icons):o.checkData("prod-discount",e.salePercentage)&&o.insertDiscount(t,"prod-discount",e.salePercentage)},prodUrl:function(t){o.checkData("prod-url",[e.url,e.code])&&o.insertLinks(t,"prod-url",e.url,e.code)},prodAvail:function(t){o.checkData("prod-avail",e.avail)&&o.insertString(t,"prod-avail",e.avail)},prodCategory:function(t){o.checkData("prod-category",e.breadcrumb)&&o.insertCategory(t,"prod-category",e.breadcrumb)},prodRating:function(t){o.checkData("prod-rating",e.rating),o.insertRating(t,"prod-rating",e.rating,"dec-")}};this.$div.find("*").addBack().filter(function(){for(var t=0;t<this.attributes.length;t++)if(/^data-prod-/.test(this.attributes[t].nodeName))return this;return!1}).each(function(){for(var t in $(this).data())if(!t.indexOf("prod"))try{r[t]($(this))}catch(t){$(this).addClass("noValue")}}),this.setClasses(e),this.data=e},e.checkData=function(t,e){var o=!0;return Array.isArray(e)?(e.length||(o=!1),e.forEach(function(t){t||(o=!1)})):o=!!e,o||this.$div.find("[data-"+t+"]").addClass("noValue"),o},e.insertData=function(t,e,o){t.children().length||t.text().replace(/\s/g,"").length||t.empty(),t.data(e).indexOf("before")<0?t.append(o):t.prepend(o)},e.insertString=function(t,e,o){if(-1<t.data(e).indexOf("short-")){var r=this.getSufixNum(t.data(e));if(!isNaN(r)&&parseInt(r)<o.length)return this.insertData(t,e,this.shortenString(o,parseInt(r))),!1}this.insertData(t,e,o)},e.insertImage=function(t,e,o,r){var n=this,i=new Image;i.onload=function(){t.addClass("loaded"),n.$div.is(".lp-products__image--failed")||n.$div.addClass("lp-products__image--loaded")},i.onerror=function(){t.addClass("failed"),n.$div.removeClass("lp-products__image--loaded").addClass("lp-products__image--failed")},-1<t.data(e).indexOf("alt")&&r&&t.attr("alt",r);r=t.is(".lazy")?"data-src":"src";-1<t.data(e).indexOf("orig")?(i.src=o.origUrl,t.attr(r,o.origUrl)):-1<t.data(e).indexOf("big")?(i.src=o.big_url,t.attr(r,o.big_url)):-1<t.data(e).indexOf("mini")?(i.src=o.url,t.attr(r,o.url)):(i.src=o.thumb,t.attr(r,o.thumb))},e.insertPrice=function(t,e,o,r){o=-1<t.data(e).indexOf("number")?this.getPriceString(r,!1):this.getPriceString(r,!0);this.insertData(t,e,o)},e.insertDiscount=function(t,e,o){var r,n=Array.isArray(o)?(r=!1,o.some(function(t){return-1<t.image.indexOf("dynamic-discount.svg")&&(r=t.image.replace(/^.*dynamic-discount.svg&.*value=(-\d+).*$/,"$1")+"%"),r}),r):o;-1<t.data(e).indexOf("number")&&(n=o.replace(/\D/g,"")),this.insertData(t,e,n)},e.insertLinks=function(t,e,o,r){var n=this,i=-1<(e=t.data(e)).indexOf("_blank"),a=-1<e.indexOf("order"),e=-1<e.indexOf("cart");if(a||e){if(a&&"function"==typeof orderFull)return void t.on("click",function(t){t.preventDefault(),t.stopPropagation(),n.$div.addClass("lp-products__product--addingInBasket"),setTimeout(function(){orderFull(n.id,1,!0,null,null,null,3,null,null),n.$div.removeClass("lp-products__product--addingInBasket").addClass("lp-products__product--inBasket")},200)});o="/Order1.htm?addCode="+r}t.is("a")?i?(t.attr({href:o,target:"_blank"}),o=!1):t.attr({href:o}):i&&(o+="|blank"),t.on("click",function(t){return n.sendGA(t,o)})},e.insertCategory=function(t,e,o){var r=99;-1<t.data(e).indexOf("cat-")&&(r=this.getSufixNum(t.data(e),"cat-"),isNaN(r)&&(r=99)),r=r>o.length?Math.max(o.length-1,0):Math.max(r-1,0),this.insertData(t,e,o.length?o[r].category.name:"")},e.insertRating=function(t,e,o,r){var n=1,i=i;-1<i.indexOf(r)&&(r=i.substr(i.indexOf(r)+r.length,1),n=isNaN(r)?n:r),(-1<i.indexOf("both")||i.indexOf("width")<0)&&this.insertData(t,e,o.toLocaleString(this.parent.countryCode,{maximumFractionDigits:n})),(-1<i.indexOf("both")||-1<i.indexOf("width"))&&(t.css("width",20*o+"%"),o||t.parent().addClass("noRatingValue"))},e.shortenString=function(t,e){return t.substr(0,e).split(" ").slice(0,-1).join(" ")+"…"},e.getSufixNum=function(t,e){return void 0===e&&(e="short-"),t.substr(t.indexOf(e)+e.length).split(" ")[0].replace(/\D+/g,"")},e.getPriceNumber=function(t){if(!t||isNaN(t.replace(/\D/g,"")))return"";if("string"==typeof t)t=t.replace(/^\D+/,"").replace(/\D+$/,"").replace(1.1.toLocaleString(this.parent.countryCode).substr(1,1),".").replace(",","").replace(/([^\d.-]+)+/g,"");else if("number"!=typeof t)return"";return parseFloat(t)},e.getPriceString=function(t,e){return void 0===e&&(e=!0),"number"!=typeof t&&(t=this.getPriceNumber(t)),t?(t=0<t-Math.floor(t)?t.toLocaleString(this.parent.currencyCountryCode,{style:"currency",currency:this.parent.Alza.currencyCode}):t.toLocaleString(this.parent.currencyCountryCode,{minimumFractionDigits:0,style:"currency",currency:this.parent.Alza.currencyCode}),(e?t:t.replace(/^\D+/,"").replace(/\D+$/,"")).replace(" ","&nbsp;")):""},e.handleCashBack=function(t){var e;isNaN(t.cashBackPrice.replace(/\D/g,""))||(e=this.getPriceNumber(t.cashBackPrice),t.salePercentage=Math.round(100*(e/(t.cprice?t.cpriceNoCurrency:t.priceNoCurrency)-1))+"%",t.cprice||(t.cprice=t.price,t.cpriceNoCurrency=t.priceNoCurrency),t.price=this.getPriceString(e,!0),t.priceNoCurrency=e)},e.setClasses=function(t){this.$div.addClass("lp-products__product--loaded"),t.canCashBack&&this.$div.addClass("lp-products__product--canCashBack"),t.can_buy&&this.$div.addClass("lp-products__product--can_buy"),t.avail_color&&this.$div.addClass("lp-products__product--"+t.avail_color),t.is_action&&this.$div.addClass("lp-products__product--is_action"),t.inBasket&&this.$div.addClass("lp-products__product--inBasket"),t.is_in_stock&&this.$div.addClass("lp-products__product--is_in_stock")},e.sendGA=function(t,e){var o={hitType:"event",eventCategory:window.location.href.indexOf(".htm")<0?"Landing pages":"Categories",eventAction:$("h1").first().text(),eventLabel:"("+this.id+") "+this.shortenString(this.data.name,50)};e&&(-1<e.indexOf("|blank")?o.hitCallback=function(){return window.open(e.split("|")[0],"_blank").focus()}:(t.preventDefault(),setTimeout(function(){return window.location.href=e},250),o.hitCallback=function(){return window.location.href=e})),ga("send",o)},t}();function sectionAnimations(e){var t;window.jQuery?((t=function(){var t=$(".toAnimate");t.length||$(window).off("scroll.toAnimate"),t.each(function(){$(this).offset().top<$(window).scrollTop()+$(window).height()*e&&$(this).addClass("animated").removeClass("toAnimate")})})(),$(window).on("scroll.toAnimate",t)):setTimeout(function(){sectionAnimations(e)},200)}function startProductsLoading(){if(!window.jQuery)return setTimeout(startProductsLoading,100);$(".lp-products.swiper-container").each(function(){$(this).on("productsCreated",produktyVytvoreny).on("productsLoaded",produktyNacteny)}),startProductsInfo()}Product.totalProducts=0,"complete"===document.readyState?startProductsLoading():document.addEventListener("DOMContentLoaded",startProductsLoading);